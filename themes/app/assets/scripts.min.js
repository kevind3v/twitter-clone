$(window).on('load',function(){$('#loading').fadeOut()});$('.i-form').on('keyup',function(){console.log('dsa');var length=$(this).val().length;var id=$(this)[0].getAttribute('id');if(length>0){$('[for='+id+']').addClass('l-form')}else{$('[for='+id+']').removeClass('l-form')}});$('.textarea').each(function(){this.setAttribute('style','height:'+this.scrollHeight+'px;overflow-y:hidden;')}).on('input',function(){this.style.height='auto';this.style.height=this.scrollHeight+'px'});$('#bio').on('keyup',function(){var length=$(this).val().length;$('.forms .count-bio span').html(length);if(length>=160){this.value=this.value.substring(0,159)}});$('#location').on('keyup',function(){var length=$(this).val().length;$('.forms .count-location span').html(length);if(length>=30){this.value=this.value.substring(0,29)}});let transition=()=>{$('html').addClass('transition')
window.setTimeout(()=>{$('html').removeClass('transition')},1000)}
$('#theme-checkbox').on('change',function(){if(this.checked){transition()
$('html').attr('data-theme','dark')}else{transition()
$('html').attr('data-theme','light')}});$(function(){$(document).on('submit',"form:not('.ajax_off')",function(e){e.preventDefault()
var form=$(this)
var load=$('#loading')
var flashClass='ajax_response'
var flash=$('#'+form[0].getAttribute('id')+' .'+flashClass)
form.ajaxSubmit({url:form.attr('action'),type:'POST',dataType:'json',beforeSend:function(){load.show()},success:function(response){if(response.redirect){window.location.href=response.redirect}else{if(response.message){flash.html(response.message).fadeIn(100)}else{flash.fadeOut(100)
window.location.reload()}}},complete:function(){load.hide()
if(form.data('reset')===!0){form.trigger('reset')}},})})});;;$(()=>{var cropperAvatar=$('#cropper_avatar');var cropper;var avatar=document.getElementById('image_avatar');$('#avatar').on('change',(event)=>{var files=event.target.files;var done=(url)=>{avatar.src=url;cropperAvatar.modal({backdrop:'static',keyboard:!1})};if(files&&files.length>0){reader=new FileReader();reader.onload=(event)=>{done(reader.result)};reader.readAsDataURL(files[0])}});cropperAvatar.on('shown.bs.modal',()=>{cropper=new Cropper(avatar,{aspectRatio:1,})}).on('hidden.bs.modal',()=>{cropper.destroy();cropper=null});$('#crop_avatar').on('click',()=>{canvas=cropper.getCroppedCanvas({minWidth:500,minHeight:500,imageSmoothingQuality:'high',});canvas.toBlob((b)=>{url=URL.createObjectURL(b);var reader=new FileReader();reader.readAsDataURL(b);reader.onloadend=()=>{var base64=reader.result;$('#profile_avatar').attr('src',base64);$('#user_avatar').attr('value',base64);cropperAvatar.modal('hide')}})})});$(function(){$('[data-toggle="tooltip"]').tooltip()})